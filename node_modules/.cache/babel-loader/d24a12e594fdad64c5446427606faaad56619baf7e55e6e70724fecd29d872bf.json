{"ast":null,"code":"var _jsxFileName = \"/home/kaushik/Documents/Projects/template-filler/src/App.js\",\n  _s = $RefreshSig$();\nimport logo from './logo.svg';\nimport './App.css';\nimport { useState } from 'react';\nimport Renderer from './components/Renderer';\nimport Sidebar from './components/Sidebar';\nimport ParamList from \"./components/ParamList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  let links = [];\n  let images = [];\n  let textElements = [];\n  const [params, SetParams] = useState({});\n  const [htmlContent, SetHTML] = useState(\"\");\n  const paramregex = /{{[^({})]+}}/g;\n  let currentHighlight = null;\n  useEffect(() => {\n    SetUpEditor();\n  }, [htmlContent]);\n  const LoadHTML = event => {\n    var file = event.target.files[0];\n    if (file) {\n      var reader = new FileReader();\n      reader.readAsText(file, \"UTF-8\");\n      reader.onload = function (evt) {\n        SetHTML(evt.target.result);\n        // document.getElementById(\"renderer\").dangerouslySetInnerHTML = evt.target.result;\n        //   // Get all elements in the document\n      };\n      reader.onerror = function (evt) {\n        document.getElementById(\"renderer\").innerHTML = \"error reading file\";\n        console.log(evt);\n      };\n    }\n  };\n  const SetUpEditor = () => {\n    const allElements = document.getElementById(\"renderer\").querySelectorAll('*');\n    textElements.length = 0;\n    images.length = 0;\n    links.length = 0;\n    console.log(allElements);\n    allElements.forEach(element => {\n      // Check if the element has only text nodes (no nested HTML tags)\n      const hasText = Array.from(element.childNodes).some(node => node.nodeType === Node.TEXT_NODE);\n      if (hasText && element.textContent.trim() !== '') {\n        textElements.push(element);\n        console.log(element);\n      }\n    });\n    links = document.getElementById(\"renderer\").querySelectorAll(\"a\");\n    links.forEach(lmnt => {\n      if (lmnt.textContent.trim() === '') {\n        lmnt.onClick = PrintSomething;\n      }\n      console.log(lmnt.href);\n      lmnt.onDoubleClick = e => {\n        e.preventDefault();\n        const newlink = window.prompt(\"Set This Hyperlink\", e.target.closest(\"a\").getAttribute(\"href\"));\n        if (newlink !== null) {\n          e.target.closest(\"a\").href = newlink;\n          DetectParams(e.target.closest(\"a\"), newlink);\n        }\n      };\n    });\n    images = document.getElementById(\"renderer\").querySelectorAll(\"img\");\n    images.forEach(lmnt => {\n      lmnt.onClick = e => {\n        if (e.ctrlKey) {\n          e.preventDefault();\n          const newsrc = window.prompt(\"Set This Image Source\", e.target.closest(\"img\").getAttribute(\"src\"));\n          if (newsrc !== null && newsrc !== 'none') {\n            e.target.closest(\"img\").src = newsrc;\n            DetectParams(e.target.closest(\"img\"), newsrc);\n          }\n        }\n      };\n    });\n  };\n  function DetectParams(element, value) {\n    // console.log(params)\n    Object.keys(params).forEach(k => {\n      const lst = params[k];\n      const index = lst.indexOf(element);\n      if (index > -1) lst.splice(index);\n      if (lst.length === 0) {\n        delete params[k];\n      }\n    });\n    const foundparams = [...value.matchAll(paramregex)];\n    foundparams.forEach(prm => {\n      prm = '' + prm + '';\n      prm = prm.substring(2, prm.length - 2);\n      if (params[prm] == null) {\n        params[prm] = [];\n      }\n      params[prm].push(element);\n    });\n    return params;\n  }\n  const PrintSomething = e => {\n    e.preventDefault();\n    console.log(\"yo\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidenav\",\n      id: \"sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"HTML Upload\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: LoadHTML\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"CSV Upload\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ParamList, {\n        params: params\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"renderer\",\n      dangerouslySetInnerHTML: {\n        __html: htmlContent\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"jjdgc4YIqKBSKZ09fNG21a32MHU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["logo","useState","Renderer","Sidebar","ParamList","jsxDEV","_jsxDEV","App","_s","links","images","textElements","params","SetParams","htmlContent","SetHTML","paramregex","currentHighlight","useEffect","SetUpEditor","LoadHTML","event","file","target","files","reader","FileReader","readAsText","onload","evt","result","onerror","document","getElementById","innerHTML","console","log","allElements","querySelectorAll","length","forEach","element","hasText","Array","from","childNodes","some","node","nodeType","Node","TEXT_NODE","textContent","trim","push","lmnt","onClick","PrintSomething","href","onDoubleClick","e","preventDefault","newlink","window","prompt","closest","getAttribute","DetectParams","ctrlKey","newsrc","src","value","Object","keys","k","lst","index","indexOf","splice","foundparams","matchAll","prm","substring","className","children","id","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","dangerouslySetInnerHTML","__html","_c","$RefreshReg$"],"sources":["/home/kaushik/Documents/Projects/template-filler/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport './App.css';\n\nimport { useState } from 'react';\nimport Renderer from './components/Renderer';\nimport Sidebar from './components/Sidebar'\nimport ParamList from \"./components/ParamList\";\n\nfunction App() {\n  let links = [];\n  let images = [];\n  let textElements = [];\n  const [params, SetParams] = useState({});\n  const [htmlContent, SetHTML] = useState(\"\");\n  const paramregex = /{{[^({})]+}}/g\n  let currentHighlight = null\n\n  useEffect(()=>{\n    SetUpEditor();\n  }, [htmlContent])\n\n  const LoadHTML = (event) => {\n      var file = event.target.files[0]\n      if (file) {\n          var reader = new FileReader();\n          reader.readAsText(file, \"UTF-8\");\n          reader.onload = function (evt) {\n            SetHTML(evt.target.result)\n            // document.getElementById(\"renderer\").dangerouslySetInnerHTML = evt.target.result;\n            //   // Get all elements in the document\n          }\n          reader.onerror = function (evt) {\n              document.getElementById(\"renderer\").innerHTML = \"error reading file\";\n              console.log(evt)\n          }\n      }\n  }\n\n  const SetUpEditor = ()=>{\n      const allElements = document.getElementById(\"renderer\").querySelectorAll('*');\n\n      textElements.length = 0;\n      images.length = 0;\n      links.length = 0;\n      console.log(allElements)\n\n      allElements.forEach(element => {\n          // Check if the element has only text nodes (no nested HTML tags)\n          const hasText = Array.from(element.childNodes).some(\n              node => node.nodeType === Node.TEXT_NODE\n          );\n          \n          if (hasText && element.textContent.trim() !== '') {\n          textElements.push(element);\n          console.log(element)\n          }\n      });\n\n      links = (document.getElementById(\"renderer\").querySelectorAll(\"a\"))\n      links.forEach(lmnt => {\n          if(lmnt.textContent.trim() === ''){\n              lmnt.onClick = PrintSomething;\n          }\n          console.log(lmnt.href)\n          lmnt.onDoubleClick = (e)=>{\n              e.preventDefault();\n              const newlink = window.prompt(\"Set This Hyperlink\", e.target.closest(\"a\").getAttribute(\"href\"))\n              if (newlink !== null){\n                  e.target.closest(\"a\").href = newlink\n                  DetectParams(e.target.closest(\"a\"), newlink)\n              }\n          }\n      })\n\n      images = (document.getElementById(\"renderer\").querySelectorAll(\"img\"));\n      images.forEach(lmnt => {\n          lmnt.onClick = e =>{\n              if(e.ctrlKey){\n                  e.preventDefault();\n                  const newsrc = window.prompt(\"Set This Image Source\", e.target.closest(\"img\").getAttribute(\"src\"));\n                  if (newsrc !== null && newsrc !== 'none'){\n                      e.target.closest(\"img\").src = newsrc;\n                      DetectParams(e.target.closest(\"img\"), newsrc)\n                  }\n              }\n          }\n      })\n  }\n  function DetectParams (element, value){\n      // console.log(params)\n      Object.keys(params).forEach(k =>{\n          const lst = params[k]\n          const index = lst.indexOf(element)\n          if(index > -1) lst.splice(index)\n          if(lst.length === 0){\n              delete params[k]\n          }\n      })\n  \n      const foundparams = [...value.matchAll(paramregex)]\n      foundparams.forEach(prm =>{\n          prm = ''+prm+''\n          prm = prm.substring(2, prm.length - 2)\n          if (params[prm] == null){\n              params[prm] = []\n          }\n          params[prm].push(element)\n      })\n      return params\n  }\n\n  const PrintSomething = (e)=>{\n      e.preventDefault()\n      console.log(\"yo\")\n  }\n\n  return (\n    <div className='App'>\n      <div className=\"sidenav\" id='sidebar'>\n          <label>HTML Upload<input type=\"file\" onChange={LoadHTML}></input></label>\n          <label>CSV Upload<input type=\"file\"></input></label>\n          {/* <button onClick={ReloadParams()}>Refresh Params List</button> */}\n          <ParamList params={params}></ParamList>\n      </div>\n      <div id=\"renderer\" dangerouslySetInnerHTML={{__html:htmlContent}}></div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}