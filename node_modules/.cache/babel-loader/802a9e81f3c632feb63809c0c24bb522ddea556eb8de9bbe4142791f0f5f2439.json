{"ast":null,"code":"var _jsxFileName = \"/home/kaushik/Documents/Projects/template-filler/src/components/Sidebar.js\",\n  _s = $RefreshSig$();\n// import {LoadHTML, MakeHTMLTemplate} from \"../TemplateHandler\"\nimport { useState, useEffect } from \"react\";\nimport ParamList from \"./ParamList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Sidebar(props) {\n  _s();\n  const links = [];\n  const images = [];\n  const textElements = [];\n  const [params, SetParams] = useState({});\n  const paramregex = /{{[^({})]+}}/g;\n  let currentHighlight = null;\n  useEffect(() => {\n    SetParams(prms);\n  }, [params, prms]);\n  const LoadHTML = event => {\n    var file = event.target.files[0];\n    if (file) {\n      var reader = new FileReader();\n      reader.readAsText(file, \"UTF-8\");\n      reader.onload = function (evt) {\n        document.getElementById(\"renderer\").innerHTML = evt.target.result;\n\n        // Get all elements in the document\n        SetUpEditor();\n      };\n      reader.onerror = function (evt) {\n        document.getElementById(\"renderer\").innerHTML = \"error reading file\";\n        console.log(evt);\n      };\n    }\n  };\n  const SetUpEditor = () => {\n    const allElements = document.getElementById(\"renderer\").querySelectorAll('*');\n    textElements.length = 0;\n    images.length = 0;\n    links.length = 0;\n    allElements.forEach(element => {\n      // Check if the element has only text nodes (no nested HTML tags)\n      const hasText = Array.from(element.childNodes).some(node => node.nodeType === Node.TEXT_NODE);\n      if (hasText && element.textContent.trim() !== '') {\n        textElements.push(element);\n      }\n    });\n    textElements.forEach(lmnt => {\n      lmnt.setAttribute(\"contenteditable\", true);\n      lmnt.addEventListener(\"input\", function (event) {\n        DetectParams(event.target, event.target.textContent);\n      }, false);\n    });\n    links.concat(document.getElementById(\"renderer\").querySelectorAll(\"a\"));\n    links.forEach(lmnt => {\n      if (lmnt.textContent.trim() === '') {\n        lmnt.onclick = e => {\n          e.preventDefault();\n        };\n      }\n      lmnt.ondblclick = e => {\n        e.preventDefault();\n        const newlink = window.prompt(\"Set This Hyperlink\", e.target.closest(\"a\").getAttribute(\"href\"));\n        if (newlink !== null) {\n          e.target.closest(\"a\").href = newlink;\n          DetectParams(e.target.closest(\"a\"), newlink);\n        }\n      };\n    });\n    images.concat(document.getElementById(\"renderer\").querySelectorAll(\"img\"));\n    images.forEach(lmnt => {\n      lmnt.onclick = e => {\n        if (e.ctrlKey) {\n          e.preventDefault();\n          const newsrc = window.prompt(\"Set This Image Source\", e.target.closest(\"img\").getAttribute(\"src\"));\n          if (newsrc !== null && newsrc !== 'none') {\n            e.target.closest(\"img\").src = newsrc;\n            DetectParams(e.target.closest(\"img\"), newsrc);\n          }\n        }\n      };\n    });\n  };\n  const DetectParams = (element, value) => {\n    // console.log(params)\n    Object.keys(params).forEach(k => {\n      const lst = params[k];\n      const index = lst.indexOf(element);\n      if (index > -1) lst.splice(index);\n      if (lst.length === 0) {\n        delete params[k];\n      }\n    });\n    const foundparams = [...value.matchAll(paramregex)];\n    foundparams.forEach(prm => {\n      prm = '' + prm + '';\n      prm = prm.substring(2, prm.length - 2);\n      if (params[prm] == null) {\n        params[prm] = [];\n      }\n      params[prm].push(element);\n    });\n    SetParams(params);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sidenav\",\n    id: \"sidebar\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"HTML Upload\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: LoadHTML\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"CSV Upload\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ParamList, {\n      params: params\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n_s(Sidebar, \"8/zEssU9dn+BkAr3AX7hF2B1/ps=\");\n_c = Sidebar;\nexport default Sidebar;\nvar _c;\n$RefreshReg$(_c, \"Sidebar\");","map":{"version":3,"names":["useState","useEffect","ParamList","jsxDEV","_jsxDEV","Sidebar","props","_s","links","images","textElements","params","SetParams","paramregex","currentHighlight","prms","LoadHTML","event","file","target","files","reader","FileReader","readAsText","onload","evt","document","getElementById","innerHTML","result","SetUpEditor","onerror","console","log","allElements","querySelectorAll","length","forEach","element","hasText","Array","from","childNodes","some","node","nodeType","Node","TEXT_NODE","textContent","trim","push","lmnt","setAttribute","addEventListener","DetectParams","concat","onclick","e","preventDefault","ondblclick","newlink","window","prompt","closest","getAttribute","href","ctrlKey","newsrc","src","value","Object","keys","k","lst","index","indexOf","splice","foundparams","matchAll","prm","substring","className","id","children","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/kaushik/Documents/Projects/template-filler/src/components/Sidebar.js"],"sourcesContent":["// import {LoadHTML, MakeHTMLTemplate} from \"../TemplateHandler\"\nimport { useState, useEffect } from \"react\";\nimport ParamList from \"./ParamList\";\n\nfunction Sidebar(props){\n\n    const links = [];\n    const images = [];\n    const textElements = [];\n    const [params, SetParams] = useState({});\n    const paramregex = /{{[^({})]+}}/g\n    let currentHighlight = null\n\n    useEffect(()=>{\n        SetParams(prms)\n    }, [params, prms])\n\n    const LoadHTML = (event) => {\n        var file = event.target.files[0]\n        if (file) {\n            var reader = new FileReader();\n            reader.readAsText(file, \"UTF-8\");\n            reader.onload = function (evt) {\n                document.getElementById(\"renderer\").innerHTML = evt.target.result;\n    \n                // Get all elements in the document\n                SetUpEditor()\n            }\n            reader.onerror = function (evt) {\n                document.getElementById(\"renderer\").innerHTML = \"error reading file\";\n                console.log(evt)\n            }\n        }\n    }\n\n    const SetUpEditor = ()=>{\n        const allElements = document.getElementById(\"renderer\").querySelectorAll('*');\n\n        textElements.length = 0;\n        images.length = 0;\n        links.length = 0;\n\n        allElements.forEach(element => {\n            // Check if the element has only text nodes (no nested HTML tags)\n            const hasText = Array.from(element.childNodes).some(\n                node => node.nodeType === Node.TEXT_NODE\n            );\n            \n            if (hasText && element.textContent.trim() !== '') {\n            textElements.push(element);\n            }\n        });\n\n        textElements.forEach(lmnt => {\n            lmnt.setAttribute(\"contenteditable\", true)\n            lmnt.addEventListener(\"input\", function(event) {\n                DetectParams(event.target, event.target.textContent)\n            }, false);\n        });\n\n        links.concat(document.getElementById(\"renderer\").querySelectorAll(\"a\"))\n        links.forEach(lmnt => {\n            if(lmnt.textContent.trim() === ''){\n                lmnt.onclick = (e)=>{\n                    e.preventDefault();\n                }\n            }\n            lmnt.ondblclick = (e)=>{\n                e.preventDefault();\n                const newlink = window.prompt(\"Set This Hyperlink\", e.target.closest(\"a\").getAttribute(\"href\"))\n                if (newlink !== null){\n                    e.target.closest(\"a\").href = newlink\n                    DetectParams(e.target.closest(\"a\"), newlink)\n                }\n            }\n        })\n\n        images.concat(document.getElementById(\"renderer\").querySelectorAll(\"img\"));\n        images.forEach(lmnt => {\n            lmnt.onclick = e =>{\n                if(e.ctrlKey){\n                    e.preventDefault();\n                    const newsrc = window.prompt(\"Set This Image Source\", e.target.closest(\"img\").getAttribute(\"src\"));\n                    if (newsrc !== null && newsrc !== 'none'){\n                        e.target.closest(\"img\").src = newsrc;\n                        DetectParams(e.target.closest(\"img\"), newsrc)\n                    }\n                }\n            }\n        })\n    }\n    const DetectParams = (element, value)=>{\n        // console.log(params)\n        Object.keys(params).forEach(k =>{\n            const lst = params[k]\n            const index = lst.indexOf(element)\n            if(index > -1) lst.splice(index)\n            if(lst.length === 0){\n                delete params[k]\n            }\n        })\n    \n        const foundparams = [...value.matchAll(paramregex)]\n        foundparams.forEach(prm =>{\n            prm = ''+prm+''\n            prm = prm.substring(2, prm.length - 2)\n            if (params[prm] == null){\n                params[prm] = []\n            }\n            params[prm].push(element)\n        })\n        SetParams(params)\n    }\n\n    return (\n        <div className=\"sidenav\" id='sidebar'>\n            <label>HTML Upload<input type=\"file\" onChange={LoadHTML}></input></label>\n            <label>CSV Upload<input type=\"file\"></input></label>\n            <ParamList params={params}></ParamList>\n        </div>\n    );\n}\nexport default Sidebar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}